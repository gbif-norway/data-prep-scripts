import requests
import json

# Your filter criteria
filter_criteria = {
  "type": "and",
  "predicates": [
    {
      "type": "in",
      "key": "TAXON_KEY",
      "values": [
        "11592253",
        "131",
        "367",
        "1470",
        "1225",
        "800",
        "786",
        "1451",
        "1000",
        "809",
        "1501",
        "1458",
        "1224",
        "797",
        "787",
        "811",
        "1457",
        "1003",
        "789",
        "7707728",
        "35",
        "359",
        "5",
        "212"
      ],
      "matchCase": False
    },
    {
      "type": "within",
      "geometry": "MULTIPOLYGON (((29.81851 69.8803, 29.46226 70.02359, 30.77967 70.29245, 30.89351 70.35764, 30.83736 70.42903, 30.08218 70.65922, 29.43812 70.71015, 28.99985 70.82671, 28.75246 70.79731, 28.41429 70.5751, 28.25782 70.54206, 28.15939 70.73445, 28.26703 70.93677, 27.87487 71.07557, 27.37523 70.99151, 27.26319 70.78085, 26.845 70.4862, 26.64966 70.50756, 26.62439 70.81079, 26.48859 70.86465, 25.20623 70.23198, 25.11515 70.28435, 25.19736 70.47135, 25.84711 70.93668, 25.86 71.07795, 25.52785 71.11457, 25.19183 70.902, 24.64748 70.94512, 24.45762 70.8289, 24.38205 70.66609, 24.22104 70.5981, 23.81598 70.6713, 23.63057 70.52861, 23.35047 70.54852, 22.36021 70.2675, 21.75471 70.31449, 21.44197 70.2013, 21.76226 69.956, 21.34469 69.96406, 21.04288 69.90624, 20.80948 70.11098, 20.59601 70.14893, 20.55357 70.07755, 20.68257 69.8987, 20.33155 69.57233, 20.21478 69.86275, 19.75499 69.7394, 19.47503 70.03733, 19.18432 70.1421, 18.87814 70.09936, 18.25971 69.65422, 18.40122 69.41765, 17.73267 69.534, 17.35303 69.48765, 17.08107 69.37102, 16.98424 69.10321, 17.14417 69.05811, 17.45626 69.08062, 17.4104 68.88663, 16.73746 68.73416, 16.41 68.95491, 16.00557 68.75554, 15.85679 68.98577, 16.05937 69.18548, 16.04344 69.26178, 15.59412 69.06883, 15.46321 68.72574, 15.24184 68.55063, 14.3126 68.32096, 13.84726 68.30607, 13.6059 68.21637, 13.59037 68.15476, 13.66343 68.12463, 14.16891 68.21049, 14.58691 68.22422, 14.71495 68.16916, 14.83866 68.25143, 15.21978 68.27009, 16.01629 68.43402, 16.2585 68.3828, 16.29383 68.31633, 16.21385 68.02024, 15.93535 68.19392, 15.50659 68.1017, 15.42643 67.93543, 14.90934 67.89498, 14.85047 67.80508, 14.90822 67.70664, 15.23169 67.73663, 15.27554 67.69079, 15.14975 67.57447, 14.76919 67.47967, 14.36298 67.2056, 14.08044 67.11181, 13.32458 66.71098, 13.10823 66.45476, 12.9981 66.21374, 12.719 66.11026, 12.50436 66.11284, 12.47196 66.01501, 12.54047 65.81596, 12.12298 65.44358, 12.04611 65.06245, 11.92536 65.09711, 11.96868 65.12278, 11.96475 65.14083, 11.93876 65.14892, 11.69793 65.08015, 11.51369 64.943, 10.86324 64.93445, 10.84204 64.8411, 11.14485 64.6733, 10.5104 64.42929, 10.42802 64.31746, 10.25413 64.27114, 10.2275 64.24232, 10.16185 64.19549, 10.12134 64.16659, 9.95653 64.04901, 9.94754 63.92073, 9.70537 63.83579, 9.63991 63.75566, 9.97052 63.51624, 10.16866 63.53166, 10.95463 63.71694, 10.85359 63.43909, 10.25026 63.44167, 10.05195 63.39191, 10.00101 63.39191, 9.88944 63.48474, 9.73 63.61739, 9.22336 63.52915, 9.11584 63.63485, 8.89803 63.66398, 8.79583 63.79227, 8.65533 63.8303, 8.5154 63.71598, 8.53797 63.61623, 8.40525 63.48474, 8.75511 63.42434, 8.65057 63.39191, 8.0956 63.21976, 8.13222 63.07149, 7.55436 63.07938, 6.97781 62.92099, 6.6626 62.64725, 6.24016 62.61661, 6.15149 62.46306, 6.34569 62.39904, 6.3481 62.3461, 5.54427 62.37707, 5.52578 62.23708, 5.42783 62.17491, 5.49274 62.01833, 5.22997 62.08392, 4.99456 61.8847, 5.12418 61.55731, 4.98565 61.35967, 4.95522 61.20141, 5.22929 61.08936, 4.99382 60.9435, 5.1403 60.84025, 4.89426 60.74241, 4.96753 60.53935, 4.87224 60.49323, 5.01783 60.18497, 5.20416 60.05198, 5.25759 60.21207, 5.41631 60.17265, 5.59645 60.20855, 5.68914 60.13278, 5.13867 59.89146, 5.15707 59.67511, 5.22862 59.65005, 5.4206 59.74348, 5.69144 59.97645, 6.05935 60.17967, 6.04612 60.05849, 5.71736 59.8159, 5.82013 59.64543, 5.59653 59.66008, 5.55066 59.55561, 5.45723 59.49801, 5.51421 59.57489, 5.51342 59.71186, 5.30058 59.59076, 5.30288 59.48117, 5.20559 59.36862, 5.21135 59.15911, 5.34943 59.22138, 5.45903 59.19268, 5.60092 59.29201, 5.83865 59.3484, 5.89839 59.4313, 6.08677 59.31452, 5.96119 59.26804, 5.91549 59.00676, 5.81534 59.03108, 5.7906 59.14605, 5.62228 59.02515, 5.53115 58.71914, 5.70167 58.54629, 6.43841 58.29073, 6.64834 58.19723, 6.65345 58.08484, 7.02666 58.00897, 7.17985 58.04455, 7.62991 57.99206, 8.18515 58.14294, 8.7928 58.40716, 9.22041 58.72696, 9.36597 58.77135, 9.39932 58.83949, 9.57764 58.85597, 9.8392 59.04418, 9.92004 58.98255, 10.1759 59.03236, 10.34169 59.16223, 10.46091 59.11115, 10.4729 59.39501, 10.36403 59.48915, 10.38076 59.60982, 10.32124 59.69125, 10.37242 59.70779, 10.42358 59.68034, 10.43366 59.53178, 10.53513 59.51672, 10.56733 59.54515, 10.61541 59.58986, 10.60109 59.65319, 10.56733 59.67259, 10.49731 59.78834, 10.64198 59.91151, 10.71368 59.88321, 10.76179 59.87789, 10.76479 59.82954, 10.64712 59.82801, 10.57564 59.72977, 10.68612 59.48941, 10.67041 59.33509, 10.8873 59.06793, 11.00842 59.03568, 11.15027 59.11745, 11.35001 59.10566, 11.36524 59.08891, 11.46083 58.98866, 11.48357 58.8921, 11.63616 58.91099, 11.77988 59.18539, 11.8262 59.23785, 11.72344 59.57439, 11.907 59.69098, 11.92697 59.79048, 11.83973 59.84077, 12.20364 59.91317, 12.47506 60.10148, 12.58778 60.49601, 12.2689 60.99078, 12.67018 61.05598, 12.8412 61.27868, 12.84467 61.36872, 12.61545 61.53536, 12.40199 61.57724, 12.15579 61.72853, 12.29937 62.26749, 12.25466 62.33102, 12.06155 62.61992, 12.12338 62.7448, 12.09117 62.89482, 12.19628 63.00517, 12.05246 63.18344, 12.0167 63.28425, 12.10845 63.39191, 12.18756 63.48474, 12.18237 63.53166, 12.17494 63.59873, 12.68759 63.97562, 13.19855 64.09171, 13.98649 64.03249, 14.11208 64.16659, 14.13914 64.19549, 14.09524 64.43417, 13.70443 64.6118, 14.32599 65.11892, 14.379 65.24742, 14.49801 65.30585, 14.51265 65.57874, 14.6117 65.81307, 14.56947 65.96912, 14.5288 66.09556, 14.51737 66.13243, 14.63047 66.1369, 14.68087 66.13889, 14.87218 66.14675, 14.95052 66.14997, 15.03577 66.15399, 15.30545 66.23269, 15.48167 66.28177, 15.45399 66.34523, 15.40029 66.4834, 15.56137 66.56957, 16.0463 66.91291, 16.37088 67.05085, 16.38578 67.20853, 16.11545 67.45966, 16.45228 67.56869, 16.72581 67.89559, 17.28739 68.10846, 17.6509 68.04136, 17.89982 67.98389, 18.11366 68.16606, 18.12592 68.53652, 18.43848 68.56905, 19.94372 68.37728, 20.11911 68.45891, 20.03878 68.56605, 20.30531 68.80409, 20.20494 69.02478, 20.54864 69.05997, 20.72805 69.105, 21.02001 69.06231, 21.07222 69.11339, 21.01241 69.18401, 21.0406 69.23785, 21.29075 69.30922, 21.53317 69.28518, 21.60496 69.27805, 21.68713 69.23785, 21.98361 69.07289, 22.39905 68.72778, 23.19862 68.63847, 23.64509 68.70745, 23.79079 68.8159, 23.91819 68.83181, 24.86563 68.5807, 25.094 68.64397, 25.22847 68.83231, 25.65954 68.92576, 25.74427 69.02747, 25.70349 69.23785, 25.75451 69.33097, 25.81511 69.36777, 25.80708 69.4303, 25.91251 69.56501, 25.97565 69.6981, 26.48716 69.93759, 27.06986 69.91742, 27.64525 70.07158, 27.93621 70.08134, 28.38317 69.82964, 28.76969 69.75619, 29.11706 69.69156, 29.31353 69.48692, 28.88893 69.24952, 28.8195 69.1265, 28.92968 69.0519, 29.15476 69.07244, 29.37253 69.31011, 30.00391 69.43575, 30.1594 69.54074, 30.17128 69.65323, 30.52939 69.54836, 30.83672 69.54677, 30.91979 69.60898, 30.86536 69.75959, 29.81851 69.8803), (16.55208 68.59143, 16.59104 68.57152, 16.57959 68.54137, 16.47662 68.55988, 16.55208 68.59143)), ((15.268 68.95911, 15.13181 69.00757, 15.01583 68.98396, 15.05245 68.89966, 14.87217 68.93416, 14.87217 68.88358, 14.96843 68.80473, 14.9237 68.78041, 14.76915 68.8475, 14.49253 68.79447, 14.40654 68.66888, 14.48957 68.60148, 14.77743 68.66823, 14.84991 68.60148, 14.69394 68.55999, 14.73196 68.49933, 14.87217 68.50035, 14.94267 68.52865, 14.92823 68.55982, 15.35626 68.67923, 15.36214 68.71101, 15.28331 68.76948, 15.35387 68.82882, 15.28705 68.89966, 15.268 68.95911)), ((23.34331 70.85705, 23.25268 70.78782, 23.09685 70.81432, 23.09685 70.72042, 22.96238 70.67808, 22.76677 70.74097, 22.68706 70.64205, 22.39734 70.70215, 22.25724 70.63839, 22.30555 70.60179, 22.19544 70.53168, 22.21338 70.51229, 22.76625 70.51224, 23.09685 70.59624, 23.09685 70.62998, 23.42447 70.81456, 23.34331 70.85705)), ((13.12006 67.93871, 13.38184 68.04017, 13.40219 68.14376, 13.06887 68.07263, 12.84587 67.88858, 12.8505 67.84037, 13.01946 67.88358, 13.12006 67.93871)), ((8.21911 63.39191, 8.11168 63.47227, 7.98699 63.48236, 7.80326 63.44808, 7.80354 63.39191, 7.82422 63.33284, 8.05824 63.28089, 8.19841 63.32811, 8.21911 63.39191)), ((19.58656 70.28281, 19.50743 70.23153, 19.67064 70.16099, 19.68702 70.09795, 19.74794 70.05807, 19.8846 70.04881, 20.00003 70.06928, 20.00939 70.11824, 19.88606 70.16477, 19.83141 70.20785, 19.76283 70.15955, 19.75736 70.25124, 19.58656 70.28281)), ((4.81411 61.13554, 4.71642 61.09574, 4.56482 61.07136, 4.53431 61.00951, 4.58762 60.9562, 4.70011 61.05131, 4.78977 61.02771, 4.82479 61.06599, 4.81411 61.13554)), ((11.9604 65.73264, 11.78131 65.68657, 11.7753 65.64326, 11.91419 65.5773, 12.00218 65.64326, 11.9604 65.73264)), ((13.08216 66.64167, 13.08927 66.7275, 13.17314 66.74183, 13.10908 66.81732, 13.04843 66.81732, 13.06006 66.71806, 12.96787 66.68973, 12.92689 66.62729, 12.9548 66.59212, 12.99202 66.63632, 13.08216 66.64167)), ((12.34786 65.86224, 12.2799 65.96781, 12.26065 66.05575, 12.21825 66.04498, 12.24405 65.81109, 12.31823 65.82135, 12.34786 65.86224)), ((23.92426 71.01862, 23.98097 70.91536, 24.1549 70.92403, 24.12173 70.97712, 24.04145 70.96663, 24.03872 71.02092, 23.92426 71.01862)), ((12.94286 66.47498, 12.85202 66.47498, 12.80472 66.40923, 12.86325 66.37379, 12.94481 66.4137, 12.94286 66.47498)), ((24.69435 71.11814, 24.62237 71.07016, 24.76788 71.02181, 24.80971 71.08897, 24.69435 71.11814)), ((19.38259 70.17426, 19.33891 70.13788, 19.51579 70.08493, 19.53593 70.13272, 19.38259 70.17426)), ((12.63806 66.36963, 12.53571 66.39197, 12.47828 66.3521, 12.52113 66.30637, 12.60849 66.3264, 12.63806 66.36963)), ((25.88616 70.74014, 25.75681 70.68174, 25.80108 70.64091, 25.91885 70.68104, 25.88616 70.74014)), ((5.79011 59.30201, 5.76652 59.21902, 5.85568 59.2103, 5.90492 59.27158, 5.79011 59.30201)), ((12.85412 66.31071, 12.75723 66.31071, 12.75723 66.21969, 12.86951 66.24961, 12.85412 66.31071)), ((26.22977 71.05182, 26.16561 71.07131, 26.05655 71.00421, 26.08206 70.98077, 26.19654 71.00582, 26.22977 71.05182)), ((12.59588 66.61963, 12.5638 66.54833, 12.65963 66.53114, 12.70133 66.61061, 12.59588 66.61963)), ((12.80852 66.64858, 12.75929 66.60332, 12.86469 66.52054, 12.87502 66.62684, 12.80852 66.64858)), ((12.32907 66.22289, 12.27648 66.15143, 12.33889 66.10616, 12.41373 66.16339, 12.32907 66.22289)), ((13.84787 67.19371, 13.65222 67.18976, 13.65101 67.14213, 13.83782 67.15641, 13.84787 67.19371)), ((6.57898 62.85149, 6.47349 62.82843, 6.44544 62.80201, 6.46405 62.78058, 6.5712 62.77411, 6.6002 62.82171, 6.57898 62.85149)), ((4.77382 59.32024, 4.81863 59.24073, 4.886 59.23722, 4.9094 59.31744, 4.77382 59.32024)), ((13.90337 67.46595, 13.84516 67.41064, 13.95482 67.3719, 14.00768 67.42723, 13.90337 67.46595)), ((14.68019 67.59372, 14.54531 67.53143, 14.61988 67.49033, 14.70048 67.52983, 14.68019 67.59372)), ((14.40517 67.46446, 14.25664 67.40339, 14.32186 67.36806, 14.41075 67.38797, 14.40517 67.46446)), ((14.07984 67.52139, 14.02955 67.41307, 14.07468 67.39285, 14.15697 67.45935, 14.07984 67.52139)), ((12.37698 66.79709, 12.40891 66.73793, 12.53374 66.73579, 12.51674 66.79872, 12.37698 66.79709)), ((22.09234 70.66446, 21.98935 70.5968, 22.01634 70.57286, 22.16614 70.59752, 22.09234 70.66446)), ((10.76582 64.79697, 10.7267 64.76158, 10.81057 64.68761, 10.88436 64.73693, 10.76582 64.79697)), ((4.82291 61.72346, 4.81592 61.6361, 4.89041 61.61113, 4.90693 61.72374, 4.82291 61.72346)), ((11.78992 65.81929, 11.66646 65.75483, 11.74818 65.69394, 11.77961 65.70795, 11.78992 65.81929)), ((13.94735 67.30921, 13.90095 67.26772, 13.91812 67.1872, 14.0349 67.27468, 13.94735 67.30921)), ((13.54192 67.06408, 13.55893 67.03015, 13.69229 66.99964, 13.69069 67.08101, 13.54192 67.06408)), ((11.97035 67.44212, 11.80779 67.43619, 11.78376 67.41393, 11.80393 67.38915, 11.9697 67.39702, 11.97035 67.44212)), ((20.2049 70.32711, 20.17152 70.29909, 20.21367 70.18555, 20.28894 70.24393, 20.2049 70.32711)), ((16.72819 69.0021, 16.65846 69.00436, 16.64031 68.95159, 16.68111 68.89848, 16.74834 68.92557, 16.72819 69.0021)), ((12.14891 65.94637, 12.11705 65.91319, 12.16649 65.88295, 12.17793 65.92309, 12.14891 65.94637)), ((12.18972 65.87131, 12.16276 65.88289, 12.13683 65.85399, 12.16059 65.8252, 12.18724 65.83235, 12.18972 65.87131)))"
    },
    {
      "type": "lessThanOrEquals",
      "key": "COORDINATE_UNCERTAINTY_IN_METERS",
      "value": "100",
      "matchCase": False
    }
  ]
}

# GBIF API endpoint for occurrences search
api_endpoint = "http://api.gbif.org/v1/occurrence/search"

# Make the request
response = requests.post(api_endpoint, json=filter_criteria)

# Check if the request was successful
if response.status_code == 200:
    data = response.json()
    # Process the data as needed, e.g., save to a file
    with open('gbif_data.json', 'w') as file:
        json.dump(data, file)
else:
    print(f"Failed to retrieve data: {response.status_code}")

